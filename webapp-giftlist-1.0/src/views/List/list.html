<div v-if="loading">Loading...</div>
<DefaultLayout v-else :title="list.title" back :backButtonTitle="labels.titles.lists" backButtonLink="/app/lists">

    <template v-slot:commands>
        <span v-if="list.isShared"
            class="flex items-center mr-4 text-green-600 font-medium hover:text-green-900 hover:bg-green-100 px-2 py-1 rounded-md cursor-pointer"
            @click="showSharingOptionsModal">
            <LockOpenIcon class="h-4 w-4 mr-2" />
            {{labels.lists.status.public}}
        </span>
        <span v-else
            class="flex items-center mr-4 text-red-600 font-medium hover:text-red-900 hover:bg-red-100 px-2 py-1 rounded-md cursor-pointer"
            @click="showSharingOptionsModal">
            <LockClosedIcon class="h-4 w-4 mr-2" />
            {{labels.lists.status.private}}
        </span>
        <span class="
					flex
					items-center
					mr-4
					text-indigo-600
					font-medium
					hover:text-indigo-900
					cursor-pointer
				" @click="router.push(`/app/lists/${list.id}/settings`)">
            <CogIcon class="h-4 w-4 mr-2" />
            {{ labels.lists.buttons.settings }}
        </span>
        <GridListToggle :isGridView="!isListView" class="w-28" @change="toggleDisplayMode" />
    </template>
    <div v-if="!isListView" class="my-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 grid-flow-row gap-x-4 gap-y-8">
        <GiftGridView v-for="gift in gifts" :key="gift.id" :gift="gift" />
    </div>
    <Table v-else :headers="tableHeaders" @sort="handleSort">
        <tr v-for="gift in gifts" :key="gift.id" class="cursor-pointer hover:bg-gray-50"
            @click="router.push(`/app/lists/${list.id}/gift/${gift.id}`)">
            <GiftListView :gift="gift" @delete="handleDeleteModal" />
        </tr>
    </Table>

    <Modal :show="sharingOptionsModal.showModal" :title="sharingOptionsModal.title"
        :cancelText="sharingOptionsModal.cancelText" @close="sharingOptionsModal.showModal = false">
        <div>
            <p>
                Cette liste est actuellement :
                <span>
                    {{ list.isShared ? label.lists.status.public : label.lists.status.private }}
                </span>
            </p>
            <Button class="mx-auto" :btnStyle="list.isShared ? 'danger' : 'primary'"
                @click="sharingOptionsModal.confirm">{{
                sharingOptionsModal.confirmText }}</Button>
        </div>
        <div>
            <InputLink :label="'Lien de partage'" :value="listSharingLink"
                :helperText="'Le lien à donner à vos amis pour accéder à votre liste'" copy />
        </div>
        <div>
            <InputText :label="'Code de partage'" :value="list.sharingCode"
                :helperText="'Le code à donner à vos amis pour accéder à votre liste'" copy />
        </div>
    </Modal>

    <Modal :show="deleteModal.showModal" :title="deleteModal.title" :confirmText="deleteModal.confirmText"
        @close="deleteModal.showModal = false" @confirm="deleteModal.confirm" type="danger">
    </Modal>

</DefaultLayout>